- name: Fetch GitHub Stats
  env:
    PAT_1: ${{ secrets.PAT_1 }}
  run: |
    # 1) GitHub Stats APIë¥¼ í˜¸ì¶œí•´ì„œ SVG íŒŒì¼ ë‚´ë ¤ë°›ê¸°
    curl -H "Authorization: Bearer $PAT_1" \
      "https://github-readme-stats.vercel.app/api?username=YenaLey&show_icons=true&hide=stars,contribs&hide_rank=true&count_private=true&include_all_commits=true" \
      -o stats.svg

    # 2) Top Langsë„ ë™ì¼í•˜ê²Œ
    curl -H "Authorization: Bearer $PAT_1" \
      "https://github-readme-stats.vercel.app/api/top-langs?username=YenaLey&layout=compact&count_private=true" \
      -o langs.svg

    # 3) ì´ì œ stats.svg, langs.svg íŒŒì¼ì´ ìƒê²¼ìœ¼ë¯€ë¡œ
    # README.mdì—ëŠ” URL ëŒ€ì‹  stats.svgì™€ langs.svgë¥¼ ì°¸ì¡°í•˜ë„ë¡ ìˆ˜ì •
    # ì›ë³¸ READMEì—ì„œ <!--STATS_START--> ~ <!--STATS_END--> ì‚¬ì´ë¥¼
    # ë¡œì»¬ svg ì‚½ì… ë¬¸êµ¬ë¡œ ì¹˜í™˜í•˜ê±°ë‚˜ etc...

    sed -i 's|<!--STATS_START-->.*<!--STATS_END-->|<!--STATS_START-->\n![](./stats.svg)\n<!--STATS_END-->|s' README.md
    sed -i 's|<!--LANGS_START-->.*<!--LANGS_END-->|<!--LANGS_START-->\n![](./langs.svg)\n<!--LANGS_END-->|s' README.md

- name: Commit and Push Changes
  run: |
    git config user.name "GitHub Actions"
    git config user.email "actions@github.com"
    git add README.md stats.svg langs.svg
    git commit -m "ğŸ”„ Update GitHub Stats (auto)" || echo "No changes to commit"
    git push
